define(function(){return function(){var t={states:{},init:function(){return this.loadTemplate(),window.addEventListener("hashchange",function(){this.loadTemplate()}.bind(this),!1),this},createView:function(t,e){var i=t.view||"js/modules/view";require([i],function(i){i().init(".app-content",t.template,e)})},loadTemplate:function(){var t=window.location.hash.replace("#!/","").split("/");t=t.filter(function(t){return""!==t});var e;t.length>1&&this.states.hasOwnProperty(t[0])&&this.states[t[0]].id?(e=this.states[t[0]],this.createView(e,t[1])):this.states.hasOwnProperty(t[0])&&!this.states[t[0]].hasOwnProperty("id")?(e=this.states[t[0]],this.createView(e)):this.createView(this.getDefaultState())},when:function(t,e){if(!e.hasOwnProperty("template"))throw new Error("Template is neccessary!");return t=t.split("/:"),t.length>1&&(e.id=!0),this.addState(t[0],e),this},otherwise:function(t){if("string"!=typeof t)throw new Error("Type of state must be a string!");this.states["default"]=t},addState:function(t,e){if("object"!=typeof e||Array.isArray(e))throw new Error("Options must be an object!");this.states[t]=e},getDefaultState:function(){var t=this.states["default"];return this.states[t]}};return t}});